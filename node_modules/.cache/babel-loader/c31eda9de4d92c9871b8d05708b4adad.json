{"ast":null,"code":"import _regeneratorRuntime from\"/Users/feelikskilpi/Desktop/FeeliksKilpi.github.io/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/feelikskilpi/Desktop/FeeliksKilpi.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/feelikskilpi/Desktop/FeeliksKilpi.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from'react';import axios from'axios';import{useState,useEffect}from'react';import{IoChevronUpOutline,IoChevronDownOutline,IoEllipsisHorizontal,IoLocationSharp,IoChatbubblesOutline}from'react-icons/io5';function MainScreen(){// Array of messages of a selected Channel\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];// Array that holds channels\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),channels=_useState4[0],setChannels=_useState4[1];// Array that holds locations\nvar _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),locations=_useState6[0],setLocations=_useState6[1];// Holds the current selected Channel, by default \"@Main\"\nvar _useState7=useState('@Main'),_useState8=_slicedToArray(_useState7,2),selectedChannel=_useState8[0],setSelectedChannel=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),selChannelId=_useState10[0],setChanId=_useState10[1];var _useState11=useState('Finland'),_useState12=_slicedToArray(_useState11,2),selectedLoc=_useState12[0],setSelectedLoc=_useState12[1];// Options panel for message\nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),options=_useState14[0],setOptions=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),id=_useState16[0],setId=_useState16[1];/*  function filterByLocation() {\n        setLocationFilter(\n            messages.filter(msg => msg.messageLocation.location === selectedLoc)\n        );\n    } */ // Fetch messages by channelname\nfunction fetchMessages(){return _fetchMessages.apply(this,arguments);}// Fetch Channels\nfunction _fetchMessages(){_fetchMessages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('http://localhost:8080/channelbyname/'+selectedChannel);case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;setMessages(json.messages);setSelectedChannel(json.channelName);setChanId(json.channelId);console.log(\"Fetched messages from \"+selectedChannel+\" and filtered by \"+selectedLoc);case 10:case\"end\":return _context.stop();}}},_callee);}));return _fetchMessages.apply(this,arguments);}function fetchChannels(){return _fetchChannels.apply(this,arguments);}// Fetch Locations\nfunction _fetchChannels(){_fetchChannels=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,json;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('http://localhost:8080/channels');case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:json=_context2.sent;setChannels(json);console.log(\"fetched Channels\");case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchChannels.apply(this,arguments);}function fetchLocations(){return _fetchLocations.apply(this,arguments);}function _fetchLocations(){_fetchLocations=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,json;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch('http://localhost:8080/locations');case 2:response=_context3.sent;_context3.next=5;return response.json();case 5:json=_context3.sent;setLocations(json);console.log(\"fetched Locations\");case 8:case\"end\":return _context3.stop();}}},_callee3);}));return _fetchLocations.apply(this,arguments);}var postDelete=function postDelete(msgId){console.log(\"Deleting message (ID) \"+id);axios.delete(\"http://localhost:8080/message/delete/\"+id).then(function(res){console.log(res.data);}).catch(function(err){console.log(err);});};var handleOptionsOpen=function handleOptionsOpen(id){setOptions(true);console.log(\"Options for message with ID: \"+id);setId(id);};var handleOptionsClose=function handleOptionsClose(){setOptions(false);};var onChannelChange=function onChannelChange(e){setSelectedChannel(e.target.value);};var onLocationChange=function onLocationChange(e){setSelectedLoc(e.target.value);};var onUpvote=function onUpvote(id,text,color,ht,loc,likes){var msgData={messageId:id,messageText:text,messageColor:color,messageHashtag:ht,messageLocation:{locationId:loc},messageLikes:likes+1,messageChannel:{channelId:selChannelId}};axios.put('http://localhost:8080/upvote',msgData).then(function(response){if(response.status===200){console.log(\"upvoted message \"+id);}else{console.log(\"Upvote failed\");}});};var onDownvote=function onDownvote(id,text,color,ht,loc,likes){var msgData={messageId:id,messageText:text,messageColor:color,messageHashtag:ht,messageLocation:{locationId:loc},messageLikes:likes-1,messageChannel:{channelId:selChannelId}};axios.put('http://localhost:8080/upvote',msgData).then(function(response){if(response.status===200){console.log(\"Downvoted message \"+id);}else{console.log(\"Downvote failed\");}});};useEffect(function(){fetchMessages();},[selectedChannel,selectedLoc]);useEffect(function(){fetchChannels();},[]);useEffect(function(){fetchLocations();},[]);if(options===true){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',backgroundColor:'orange',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Message settings\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"MessageID: \",id]}),/*#__PURE__*/_jsxs(\"div\",{className:\"op_btns\",style:{display:'flex',flexDirection:'column',width:200,alignItems:'center',margin:20},children:[/*#__PURE__*/_jsx(\"button\",{style:{display:'flex',height:40,width:150,fontSize:24},onClick:postDelete,children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{style:{display:'flex',height:40,width:150,fontSize:24},children:\"Share\"}),/*#__PURE__*/_jsx(\"button\",{style:{display:'flex',height:40,width:150,fontSize:24},children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{style:{display:'flex',height:40,width:150,fontSize:24},onClick:handleOptionsClose,children:\"Close\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',backgroundColor:'#d7d9db',alignItems:'center',justifyContent:'center',padding:10},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',marginRight:20,backgroundColor:'orange',alignItems:'center',justifyContent:'center',borderRadius:50,paddingLeft:30,paddingRight:30},children:[/*#__PURE__*/_jsx(IoChatbubblesOutline,{style:{fontSize:28,color:'#fff',margin:10}}),/*#__PURE__*/_jsx(\"select\",{onChange:onChannelChange,style:{width:200,height:40,fontSize:24,display:'flex',BackgroundColor:'#fff'},children:channels.map(function(chan){return/*#__PURE__*/_jsx(\"option\",{value:chan.channelName,children:chan.channelName},chan.channelId);})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',marginRight:20,backgroundColor:'orange',alignItems:'center',justifyContent:'center',borderRadius:50,paddingLeft:30,paddingRight:30},children:[/*#__PURE__*/_jsx(IoLocationSharp,{style:{fontSize:28,color:\"#fff\",margin:10}}),/*#__PURE__*/_jsxs(\"select\",{style:{display:'flex',backgroundColor:'#fff',height:40,width:200,padding:15,fontSize:20},onChange:onLocationChange,children:[locations.map(function(loc){return/*#__PURE__*/_jsx(\"option\",{children:loc.location},loc.locationId);}),/*#__PURE__*/_jsx(\"option\",{value:\"\",selected:true,disabled:true,hidden:true,children:\"Choose Location\"})]})]})]}),messages.filter(function(msg){return msg.messageLocation.location===selectedLoc;}).map(function(msg){return/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:msg.messageColor},children:/*#__PURE__*/_jsxs(\"div\",{id:\"jodelContainer\",style:{margin:10},children:[/*#__PURE__*/_jsxs(\"div\",{id:\"topBar\",style:{display:'flex',flexDirection:'row'},children:[/*#__PURE__*/_jsx(IoLocationSharp,{style:{color:\"#fff\",fontSize:20,marginTop:10,opacity:0.7}}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#fff\",fontSize:14,marginTop:10,marginRight:15,opacity:0.7},children:msg.messageLocation.location}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#fff\",fontSize:14,marginRight:10},children:/*#__PURE__*/_jsx(\"b\",{children:selectedChannel})}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#fff\",fontSize:14,opacity:0.7},children:\"0s\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"jodling\",style:{display:'flex'},children:[/*#__PURE__*/_jsxs(\"div\",{id:\"textContent\",style:{flex:10},children:[/*#__PURE__*/_jsx(\"p\",{style:{color:\"#fff\",fontSize:18},children:msg.messageText}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#fff\",fontSize:18},children:/*#__PURE__*/_jsx(\"b\",{children:msg.messageHashtag})}),/*#__PURE__*/_jsx(\"p\",{children:msg.messageId})]}),/*#__PURE__*/_jsx(\"div\",{id:\"rightControls\",style:{flex:1},children:/*#__PURE__*/_jsxs(\"div\",{id:\"likes\",style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(IoChevronUpOutline,{style:{color:\"#fff\",fontSize:25},onClick:function onClick(){return onUpvote(msg.messageId,msg.messageText,msg.messageColor,msg.messageHashtag,msg.messageLocation.locationId,msg.messageLikes);}}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#fff\",fontSize:25,paddingLeft:5},children:msg.messageLikes}),/*#__PURE__*/_jsx(IoChevronDownOutline,{style:{color:\"#fff\",fontSize:25},onClick:function onClick(){return onDownvote(msg.messageId,msg.messageText,msg.messageColor,msg.messageHashtag,msg.messageLocation.locationId,msg.messageLikes);}})]})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"threeDots\",style:{display:'flex'},children:/*#__PURE__*/_jsx(IoEllipsisHorizontal,{style:{color:\"#fff\",fontSize:30,flex:1},onClick:function onClick(){return handleOptionsOpen(msg.messageId);},id:msg.messageId})})]})},msg.messageId);})]});}export default MainScreen;","map":{"version":3,"sources":["/Users/feelikskilpi/Desktop/FeeliksKilpi.github.io/src/components/MainScreen.js"],"names":["React","axios","useState","useEffect","IoChevronUpOutline","IoChevronDownOutline","IoEllipsisHorizontal","IoLocationSharp","IoChatbubblesOutline","MainScreen","messages","setMessages","channels","setChannels","locations","setLocations","selectedChannel","setSelectedChannel","selChannelId","setChanId","selectedLoc","setSelectedLoc","options","setOptions","id","setId","fetchMessages","fetch","response","json","channelName","channelId","console","log","fetchChannels","fetchLocations","postDelete","msgId","delete","then","res","data","catch","err","handleOptionsOpen","handleOptionsClose","onChannelChange","e","target","value","onLocationChange","onUpvote","text","color","ht","loc","likes","msgData","messageId","messageText","messageColor","messageHashtag","messageLocation","locationId","messageLikes","messageChannel","put","status","onDownvote","display","flexDirection","backgroundColor","alignItems","width","margin","height","fontSize","justifyContent","padding","marginRight","borderRadius","paddingLeft","paddingRight","BackgroundColor","map","chan","location","filter","msg","marginTop","opacity","flex"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\nimport {IoChevronUpOutline, IoChevronDownOutline, IoEllipsisHorizontal, IoLocationSharp, IoChatbubblesOutline} from 'react-icons/io5';\n\nfunction MainScreen() {\n\n    // Array of messages of a selected Channel\n    const [messages, setMessages] = useState([]);\n    // Array that holds channels\n    const [channels, setChannels] = useState([]);\n    // Array that holds locations\n    const [locations, setLocations] = useState([]);\n\n    // Holds the current selected Channel, by default \"@Main\"\n    const [selectedChannel, setSelectedChannel] = useState('@Main');\n    const [selChannelId, setChanId] = useState(1);\n    const [selectedLoc, setSelectedLoc] = useState('Finland');\n\n    // Options panel for message\n    const [options, setOptions] = useState(false);\n    const [id, setId] = useState(0);\n\n  /*  function filterByLocation() {\n        setLocationFilter(\n            messages.filter(msg => msg.messageLocation.location === selectedLoc)\n        );\n    } */\n\n    // Fetch messages by channelname\n    async function fetchMessages() {\n        const response = await fetch('http://localhost:8080/channelbyname/'+selectedChannel);\n        const json = await response.json();\n        setMessages(json.messages);\n        setSelectedChannel(json.channelName);\n        setChanId(json.channelId);\n        console.log(\"Fetched messages from \" + selectedChannel + \" and filtered by \" + selectedLoc);\n    }\n\n    // Fetch Channels\n    async function fetchChannels() {\n        const response = await fetch('http://localhost:8080/channels');\n        const json = await response.json();\n        setChannels(json);\n        console.log(\"fetched Channels\");\n    }\n    // Fetch Locations\n    async function fetchLocations() {\n        const response = await fetch('http://localhost:8080/locations');\n        const json = await response.json();\n        setLocations(json);\n        console.log(\"fetched Locations\");\n    } \n\n    const postDelete = (msgId) => {\n        console.log(\"Deleting message (ID) \" + id);\n        axios.delete(\"http://localhost:8080/message/delete/\"+id)\n            .then(res => {\n                console.log(res.data);\n            })\n            .catch((err) => {\n                console.log(err);\n            })\n    }\n\n    const handleOptionsOpen = (id) => {\n        setOptions(true);\n        console.log(\"Options for message with ID: \" + id);\n        setId(id);\n    }\n    const handleOptionsClose = () => {\n        setOptions(false);\n    }\n\n    const onChannelChange = (e) => {\n        setSelectedChannel(e.target.value);\n    }\n    const onLocationChange = (e) => {\n        setSelectedLoc(e.target.value);  \n    }\n\n    const onUpvote = (id, text, color, ht, loc, likes) => {\n        const msgData = {\n            messageId: id,\n            messageText: text,\n            messageColor: color,\n            messageHashtag: ht,\n            messageLocation: {\n                locationId: loc\n            },\n            messageLikes: likes+1,\n            messageChannel: {\n                channelId: selChannelId\n            }\n        }\n        axios.put('http://localhost:8080/upvote', msgData)\n        .then(response => {\n            if (response.status === 200) {\n                console.log(\"upvoted message \" + id);\n            } else {\n                console.log(\"Upvote failed\");\n            }\n        })\n    }\n\n    const onDownvote = (id, text, color, ht, loc, likes) => {\n        const msgData = {\n            messageId: id,\n            messageText: text,\n            messageColor: color,\n            messageHashtag: ht,\n            messageLocation: {\n                locationId: loc\n            },\n            messageLikes: likes-1,\n            messageChannel: {\n                channelId: selChannelId\n            }\n        }\n        axios.put('http://localhost:8080/upvote', msgData)\n        .then(response => {\n            if (response.status === 200) {\n                console.log(\"Downvoted message \" + id);\n            } else {\n                console.log(\"Downvote failed\");\n            }\n        })\n    }\n\n    useEffect(() => {fetchMessages()}, [selectedChannel, selectedLoc]);\n    useEffect(() => {fetchChannels()}, []);\n    useEffect(() => {fetchLocations()}, []);\n\n    \n    if (options === true) {\n        return(\n            <div style={{display: 'flex', flexDirection: 'column', backgroundColor: 'orange', alignItems: 'center'}}>\n                <h1>Message settings</h1>\n                <p>MessageID: {id}</p>\n                <div className='op_btns' style={{display: 'flex', flexDirection: 'column', width: 200, alignItems: 'center', margin: 20}}>\n                    <button style={{display: 'flex', height: 40, width: 150, fontSize: 24}} onClick={postDelete}>Delete</button>\n                    <button style={{display: 'flex', height: 40, width: 150, fontSize: 24}}>Share</button>\n                    <button style={{display: 'flex', height: 40, width: 150, fontSize: 24}}>Save</button>\n                    <button style={{display: 'flex', height: 40, width: 150, fontSize: 24}} onClick={handleOptionsClose}>Close</button>\n                </div>\n            </div>\n        )\n    }\n    return(\n        <div style={{display: 'flex', flexDirection: 'column'}}>\n            <div style={{display: 'flex', backgroundColor: '#d7d9db', alignItems: 'center', justifyContent: 'center', padding: 10}}>\n                <div style={{display: 'flex', marginRight: 20, backgroundColor: 'orange', alignItems: 'center', justifyContent: 'center', borderRadius: 50, paddingLeft: 30, paddingRight: 30}}>\n                    <IoChatbubblesOutline style={{fontSize: 28, color: '#fff', margin: 10}} />\n                <select onChange={onChannelChange} style={{width: 200, height: 40, fontSize: 24, display: 'flex', BackgroundColor: '#fff'}}>\n                    {channels.map(chan =>\n                       <option \n                       key={chan.channelId} \n                       value={chan.channelName}\n                       >{chan.channelName}</option> \n                    )}\n                </select>\n                </div>\n                <div style={{display: 'flex', marginRight: 20, backgroundColor: 'orange', alignItems: 'center', justifyContent: 'center', borderRadius: 50, paddingLeft: 30, paddingRight: 30}}>\n                    <IoLocationSharp style={{fontSize: 28, color: \"#fff\", margin: 10}}/>\n                        <select style={{display: 'flex', backgroundColor: '#fff', height: 40, width: 200, padding: 15, fontSize: 20}} onChange={onLocationChange}>\n                                {\n                                    locations.map((loc) => (\n                                        <option key={loc.locationId}>{loc.location}</option>\n                                    ))\n                                }\n                                <option value=\"\" selected disabled hidden>Choose Location</option>\n                        </select>\n                </div>\n            </div>\n            { \n            messages.filter(msg => msg.messageLocation.location === selectedLoc).map((msg) => (\n            <div key={msg.messageId} style={{backgroundColor: msg.messageColor}}>\n            <div id='jodelContainer' style={{margin: 10}}>\n                <div id='topBar' style={{display: 'flex', flexDirection: 'row'}}>\n                    <IoLocationSharp style={{color: \"#fff\", fontSize: 20, marginTop: 10, opacity: 0.7}}/>\n                    <p style={{color: \"#fff\", fontSize: 14, marginTop: 10, marginRight: 15, opacity: 0.7}}>{msg.messageLocation.location}</p>\n                    <p style={{color: \"#fff\", fontSize: 14, marginRight: 10}}><b>{selectedChannel}</b></p>\n                    <p style={{color: \"#fff\", fontSize: 14, opacity: 0.7}}>0s</p>\n                </div>\n                <div id='jodling' style={{display: 'flex'}}>\n                    <div id='textContent' style={{flex: 10}}>\n                        <p style={{color: \"#fff\", fontSize: 18}}>{msg.messageText}</p>\n                        <br />\n                        <p style={{color: \"#fff\", fontSize: 18}}><b>{msg.messageHashtag}</b></p>\n                        <p>{msg.messageId}</p>\n                    </div>\n                    <div id='rightControls' style={{flex: 1}}>\n                        <div id='likes' style={{display: 'flex', flexDirection: 'column'}}>\n                            <IoChevronUpOutline style={{color: \"#fff\", fontSize: 25}} \n                            onClick={() => \n                                onUpvote(msg.messageId, msg.messageText, msg.messageColor, msg.messageHashtag, msg.messageLocation.locationId, msg.messageLikes)\n                            }/>\n                            <p style={{color: \"#fff\", fontSize: 25, paddingLeft: 5}}>{msg.messageLikes}</p>\n                            <IoChevronDownOutline style={{color: \"#fff\", fontSize: 25}}\n                            onClick={() =>\n                            onDownvote(msg.messageId, msg.messageText, msg.messageColor, msg.messageHashtag, msg.messageLocation.locationId, msg.messageLikes)}/>\n                        </div>\n                    </div>\n                </div>\n                <div id='threeDots' style={{display: 'flex'}}>\n                    <IoEllipsisHorizontal style={{color: \"#fff\", fontSize: 30, flex: 1}}\n                    onClick={() => handleOptionsOpen(msg.messageId)} id={msg.messageId}/>\n                </div>\n            </div>\n            </div>\n            ))\n            }\n        </div>\n    )\n}\n\nexport default MainScreen;"]},"metadata":{},"sourceType":"module"}